apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "todo-app.fullname" . }}-config
  labels:
    {{- include "todo-app.labels" . | nindent 4 }}
data:
  # Database Configuration
  DATABASE_HOST: {{ .Values.config.databaseHost | quote }}
  DATABASE_PORT: {{ .Values.config.databasePort | quote }}
  DATABASE_NAME: {{ .Values.config.databaseName | quote }}
  DATABASE_USER: {{ .Values.config.databaseUser | quote }}

  # Service URLs
  CHAT_API_URL: {{ .Values.config.chatApiUrl | quote }}
  RECURRING_TASKS_URL: {{ .Values.config.recurringTasksUrl | quote }}
  NOTIFICATIONS_URL: {{ .Values.config.notificationsUrl | quote }}
  AUDIT_URL: {{ .Values.config.auditUrl | quote }}
  FRONTEND_URL: {{ .Values.config.frontendUrl | quote }}

  # Dapr Configuration
  DAPR_HTTP_PORT: {{ .Values.config.daprHttpPort | quote }}
  DAPR_GRPC_PORT: {{ .Values.config.daprGrpcPort | quote }}
  DAPR_PLACEMENT_HOST: {{ .Values.config.daprPlacementHost | quote }}

  # Kafka Configuration
  KAFKA_BROKERS: {{ .Values.config.kafkaBrokers | quote }}
  KAFKA_TOPIC_TASK_EVENTS: {{ .Values.config.kafkaTopics.taskEvents | quote }}
  KAFKA_TOPIC_REMINDERS: {{ .Values.config.kafkaTopics.reminders | quote }}
  KAFKA_TOPIC_TASK_UPDATES: {{ .Values.config.kafkaTopics.taskUpdates | quote }}

  # Application Settings
  ENVIRONMENT: {{ .Values.config.environment | quote }}
  LOG_LEVEL: {{ .Values.config.logLevel | quote }}
  CORS_ORIGINS: {{ .Values.config.corsOrigins | quote }}

  # Feature Flags
  FEATURE_RECURRING_TASKS: {{ .Values.config.features.recurringTasks | quote }}
  FEATURE_REMINDERS: {{ .Values.config.features.reminders | quote }}
  FEATURE_TAGS: {{ .Values.config.features.tags | quote }}
  FEATURE_SEARCH: {{ .Values.config.features.search | quote }}
  FEATURE_AUDIT: {{ .Values.config.features.audit | quote }}
